(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{54:function(e,n,t){e.exports=t(78)},65:function(e,n,t){},66:function(e,n,t){},67:function(e,n,t){},78:function(e,n,t){"use strict";t.r(n);var a,r,c,l=t(2),i=t.n(l),o=t(47),u=t.n(o),m=t(8),s=t(92),d=t(94),b=t(91),E=t(50),p=t(11),v=(t(65),t(25)),f=t(93),j=t(87),O=Object(f.a)(a||(a=Object(v.a)(["\n  subscription MyQuery {\n    player(limit: 10, order_by: { score: desc }) {\n      name\n      score\n    }\n  }\n"]))),g=function(){var e=Object(j.a)(O),n=e.loading,t=e.error,a=e.data;return n?i.a.createElement("div",null,"Loading top 10 scores..."):t?(console.error(t),i.a.createElement("div",null,"Error!")):a?a.player.map(function(e){return i.a.createElement("div",{key:e.name},i.a.createElement("p",null,e.name," - ",e.score))}):void 0},y=function(){var e=Object(p.b)(),n=e.loginWithRedirect;return!e.isAuthenticated&&i.a.createElement("button",{onClick:function(){return n()}},"Login")},h=function(){var e=Object(p.b)(),n=e.logout;return e.isAuthenticated&&i.a.createElement("button",{onClick:function(){return n()}},"Logout")},w=(t(66),Object(f.a)(r||(r=Object(v.a)(["\n    subscription MyQuery($email: String!) {\n        player_by_pk(email: $email) {\n            name\n            score\n        }\n    }\n"])))),k=function(){var e=Object(l.useState)(""),n=Object(m.a)(e,2),t=n[0],a=n[1],r=Object(p.b)(),c=r.user,o=r.isLoading,u=Object(j.a)(w,{variables:{email:t}}),s=u.loading,d=u.error,b=u.data;return Object(l.useEffect)(function(){c&&a(c.email)},[c]),s||o?i.a.createElement("div",null,"Loading my profile..."):d?(console.error(d),i.a.createElement("div",null,"Error!")):b.player_by_pk?i.a.createElement("div",null,i.a.createElement("div",{className:"column"},i.a.createElement("img",{src:c.picture,alt:c.name}),i.a.createElement("h2",null,c.name,"'s score - ",b.player_by_pk.score))):void 0},_=t(88),L=(t(67),Object(f.a)(c||(c=Object(v.a)(["\n    mutation MyMutation($email: String) {\n        update_player(where: {email: {_eq: $email}}, _inc: {score: 1}) {\n        returning {\n            score\n        }\n        }\n    }\n"])))),S=function(){var e=Object(l.useState)(""),n=Object(m.a)(e,2),t=n[0],a=n[1],r=Object(p.b)(),c=r.user,o=r.isLoading,u=Object(_.a)(L,{variables:{email:t}}),s=Object(m.a)(u,1)[0];return Object(l.useEffect)(function(){c&&a(c.email)},[c]),o?i.a.createElement("div",null,"Loading..."):i.a.createElement("div",null,i.a.createElement("button",{type:"button",className:"playbutton",onClick:s},"Click to play"))};var M=function(){var e=Object(l.useState)(new s.a({link:new E.a({uri:"wss://simplest-game-ever.hasura.app/v1/graphql",options:{reconnect:!0,connectionParams:{headers:{"x-hasura-admin-secret":"game"}}}}),cache:new d.a})),n=Object(m.a)(e,1)[0];return i.a.createElement(b.a,{client:n},i.a.createElement("div",{className:"App"},i.a.createElement("h1",null,"Simplest Game Ever"),i.a.createElement(g,null),function(){var e=Object(p.b)(),n=e.isLoading,t=e.isAuthenticated;return n?i.a.createElement("div",null,"Loading my profile..."):t?i.a.createElement("div",null,i.a.createElement(S,null),i.a.createElement(k,null),i.a.createElement(h,null)):i.a.createElement("div",null,i.a.createElement(y,null))}()))};u.a.createRoot(document.getElementById("root")).render(i.a.createElement(i.a.StrictMode,null,i.a.createElement(p.a,{domain:"dev-stkiosod.us.auth0.com",clientId:"mBngErPZM5YJ4qR3unU2GCVvl5qE7avd",redirectUri:window.location.href},i.a.createElement(M,null))))}},[[54,1,2]]]);
//# sourceMappingURL=main.d57ad1e2.chunk.js.map