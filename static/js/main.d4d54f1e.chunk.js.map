{"version":3,"sources":["components/HighScores/HighScores.js","components/MyScore/MyScore.js","components/Button/Button.js","App.js","index.js"],"names":["GET_HIGHSCORES","gql","_templateObject","Object","taggedTemplateLiteral","HighScores","_useSubscription","useSubscription","loading","error","data","react_default","a","createElement","console","player","map","p","key","username","score","GET_MYSCORE","MyScore_templateObject","MyScore","INCREMENT_MYSCORE","Button_templateObject","Button","_useMutation","useMutation","incrementMyScore","slicedToArray","type","onClick","App","_useState","useState","ApolloClient","link","WebSocketLink","uri","options","reconnect","connectionParams","headers","x-hasura-admin-secret","process","REACT_APP_X_HASURA_ADMIN_SECRET","cache","InMemoryCache","client","ApolloProvider","className","components_HighScores_HighScores","components_Button_Button","components_MyScore_MyScore","ReactDOM","createRoot","document","getElementById","render","StrictMode","src_App_0"],"mappings":"2QAGMA,EAAiBC,YAAHC,MAAAC,OAAAC,EAAA,EAAAD,CAAA,2IA+BLE,EAtBI,WAAM,IAAAC,EACUC,YAAgBP,GAAzCQ,EADeF,EACfE,QAASC,EADMH,EACNG,MAAOC,EADDJ,EACCI,KAExB,OAAIF,EACKG,EAAAC,EAAAC,cAAA,yBAELJ,GACFK,QAAQL,MAAMA,GACPE,EAAAC,EAAAC,cAAA,sBAGLH,EACKA,EAAKK,OAAOC,IAAI,SAACC,GACtB,OACEN,EAAAC,EAAAC,cAAA,OAAKK,IAAKD,EAAEE,UACVR,EAAAC,EAAAC,cAAA,SAAII,EAAEE,SAAN,IAAiBF,EAAEG,eAJ3B,GCpBIC,EAAcpB,YAAHqB,MAAAnB,OAAAC,EAAA,EAAAD,CAAA,gJA6BFoB,EAnBC,WAAM,IAAAjB,EACeC,YAAgBc,GAAzCb,EADUF,EACVE,QAASC,EADCH,EACDG,MAAOC,EADNJ,EACMI,KAExB,OAAIF,EACOG,EAAAC,EAAAC,cAAA,yBAEPJ,GACAK,QAAQL,MAAMA,GACPE,EAAAC,EAAAC,cAAA,sBAEPH,EAAKK,OAAO,GAERJ,EAAAC,EAAAC,cAAA,WACIF,EAAAC,EAAAC,cAAA,SAAIH,EAAKK,OAAO,GAAGI,SAAnB,cAAwCT,EAAKK,OAAO,GAAGK,aAHnE,WCpBEI,EAAoBvB,YAAHwB,MAAAtB,OAAAC,EAAA,EAAAD,CAAA,0LAmBRuB,EATA,WAAM,IAAAC,EACUC,YAAYJ,GAAhCK,EADU1B,OAAA2B,EAAA,EAAA3B,CAAAwB,EAAA,MAGjB,OACIhB,EAAAC,EAAAC,cAAA,WACIF,EAAAC,EAAAC,cAAA,UAAQkB,KAAK,SAASC,QAASH,GAA/B,cCsBGI,EAdH,WAAM,IAAAC,EACCC,mBAjBV,IAAIC,IAAa,CACtBC,KAAM,IAAIC,IAAc,CACtBC,IAAK,iDACLC,QAAS,CACPC,WAAW,EACXC,iBAAkB,CAChBC,QAAS,CACPC,wBAAyBC,+DAAYC,qCAK7CC,MAAO,IAAIC,OAKNC,EADS9C,OAAA2B,EAAA,EAAA3B,CAAA+B,EAAA,MAEhB,OACEvB,EAAAC,EAAAC,cAACqC,EAAA,EAAD,CAAgBD,OAAQA,GACtBtC,EAAAC,EAAAC,cAAA,OAAKsC,UAAU,OACbxC,EAAAC,EAAAC,cAAA,gCACAF,EAAAC,EAAAC,cAACuC,EAAD,MACAzC,EAAAC,EAAAC,cAACwC,EAAD,MACA1C,EAAAC,EAAAC,cAACyC,EAAD,SC9BKC,IAASC,WAAWC,SAASC,eAAe,SACpDC,OACHhD,EAAAC,EAAAC,cAACF,EAAAC,EAAMgD,WAAP,KACEjD,EAAAC,EAAAC,cAACgD,EAAD","file":"static/js/main.d4d54f1e.chunk.js","sourcesContent":["import { gql, useSubscription } from '@apollo/client';\nimport React from 'react';\n\nconst GET_HIGHSCORES = gql`\n    subscription MyQuery {\n      player(limit: 10, order_by: {score: desc}) {\n        username\n        score\n      }\n    }\n`;\n\nconst HighScores = () => {\n  const { loading, error, data } = useSubscription(GET_HIGHSCORES);\n\n  if (loading) {\n    return <div>Loading...</div>;\n  }\n  if (error) {\n    console.error(error);\n    return <div>Error!</div>;\n  }\n\n  if (data) {\n    return data.player.map((p) => {\n      return (\n        <div key={p.username}>\n          <p>{p.username}-{p.score}</p>\n        </div>\n      )\n    })\n  }\n};\n\nexport default HighScores;\n","import { gql, useSubscription } from '@apollo/client';\nimport React from 'react';\n\nconst GET_MYSCORE = gql`\n    subscription MyQuery {\n        player(where: {username: {_eq: \"Ravindu\"}}) {\n        username\n        score\n        }\n    }\n`;\n\n\nconst MyScore = () => {\n    const { loading, error, data } = useSubscription(GET_MYSCORE);\n\n    if (loading) {\n        return <div>Loading...</div>;\n    }\n    if (error) {\n        console.error(error);\n        return <div>Error!</div>;\n    }\n    if (data.player[0]) {\n        return (\n            <div>\n                <p>{data.player[0].username}'s score - {data.player[0].score}</p>\n            </div>\n        )\n    }\n}\n\nexport default MyScore;\n","import { gql, useMutation } from '@apollo/client';\nimport React from 'react';\n\nconst INCREMENT_MYSCORE = gql`\n    mutation MyMutation {\n        update_player(where: {username: {_eq: \"Ravindu\"}}, _inc: {score: 1}) {\n        returning {\n            score\n        }\n        }\n    }\n`;\n\nconst Button = () => {\n    const [incrementMyScore] = useMutation(INCREMENT_MYSCORE);\n\n    return (\n        <div>\n            <button type=\"button\" onClick={incrementMyScore}>Click Me</button>\n        </div>\n    )\n};\nexport default Button;","import React, { useState } from 'react';\nimport { ApolloClient, ApolloProvider, InMemoryCache } from '@apollo/client';\nimport { WebSocketLink } from \"@apollo/client/link/ws\";\n\nimport \"./App.css\";\nimport HighScores from './components/HighScores/HighScores';\nimport MyScore from './components/MyScore/MyScore';\nimport Button from './components/Button/Button';\n\nconst createApolloClient = () => {\n  return new ApolloClient({\n    link: new WebSocketLink({\n      uri: 'wss://simplest-game-ever.hasura.app/v1/graphql',\n      options: {\n        reconnect: true,\n        connectionParams: {\n          headers: {\n            'x-hasura-admin-secret': process.env.REACT_APP_X_HASURA_ADMIN_SECRET\n          }\n        }\n      }\n    }),\n    cache: new InMemoryCache(),\n  });\n};\n\nconst App = () => {\n  const [client] = useState(createApolloClient());\n  return (\n    <ApolloProvider client={client}>\n      <div className=\"App\">\n        <h1>Simplest Game Ever</h1>\n        <HighScores />\n        <Button />\n        <MyScore />\n      </div>\n    </ApolloProvider>\n  );\n};\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom/client';\nimport App from './App';\n\nconst root = ReactDOM.createRoot(document.getElementById('root'));\nroot.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>\n);\n\n"],"sourceRoot":""}