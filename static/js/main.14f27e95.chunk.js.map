{"version":3,"sources":["components/HighScores/HighScores.js","components/LoginButton/LoginButton.js","components/LogoutButton/LogoutButton.js","components/MyScore/MyScore.js","components/PlayButton/PlayButton.js","App.js","index.js"],"names":["GET_HIGHSCORES","gql","_templateObject","Object","taggedTemplateLiteral","HighScores","_useSubscription","useSubscription","loading","error","data","react_default","a","createElement","console","player","map","p","key","name","score","LoginButton","_useAuth","useAuth0","loginWithRedirect","isAuthenticated","onClick","LogoutButton","logout","returnTo","window","location","href","GET_MYSCORE","MyScore_templateObject","MyScore","_useState","useState","_useState2","slicedToArray","email","setEmail","user","isLoading","variables","useEffect","player_by_pk","className","src","picture","alt","INCREMENT_MYSCORE","PlayButton_templateObject","Button","_useMutation","useMutation","incrementMyScore","type","App","ApolloClient","link","WebSocketLink","uri","options","reconnect","connectionParams","headers","x-hasura-admin-secret","process","cache","InMemoryCache","client","ApolloProvider","components_HighScores_HighScores","PlayButton_PlayButton","components_MyScore_MyScore","components_LogoutButton_LogoutButton","components_LoginButton_LoginButton","getMyProfile","ReactDOM","createRoot","document","getElementById","render","StrictMode","auth0_react_esm","domain","clientId","redirectUri","src_App_0"],"mappings":"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","file":"static/js/main.14f27e95.chunk.js","sourcesContent":["import { gql, useSubscription } from \"@apollo/client\";\nimport React from \"react\";\n\nconst GET_HIGHSCORES = gql`\n  subscription MyQuery {\n    player(limit: 10, order_by: { score: desc }) {\n      name\n      score\n    }\n  }\n`;\n\nconst HighScores = () => {\n  const { loading, error, data } = useSubscription(GET_HIGHSCORES);\n\n  if (loading) {\n    return <div>Loading top 10 scores...</div>;\n  }\n  if (error) {\n    console.error(error);\n    return <div>Error!</div>;\n  }\n\n  if (data) {\n    return data.player.map((p) => {\n      return (\n        <div key={p.name}>\n          <p>\n            {p.name} - {p.score}\n          </p>\n        </div>\n      );\n    });\n  }\n};\n\nexport default HighScores;\n","import { useAuth0 } from \"@auth0/auth0-react\";\nimport React from \"react\";\n\nconst LoginButton = () => {\n  const { loginWithRedirect, isAuthenticated } = useAuth0();\n\n  return (\n    !isAuthenticated && (\n      <button onClick={() => loginWithRedirect()}>Login</button>\n    )\n  );\n};\n\nexport default LoginButton;\n","import { useAuth0 } from \"@auth0/auth0-react\";\nimport React from \"react\";\n\nconst LogoutButton = () => {\n  const { logout, isAuthenticated } = useAuth0();\n\n  return isAuthenticated && <button onClick={() => logout({ returnTo: window.location.href })}>Logout</button>;\n};\n\nexport default LogoutButton;\n","import { gql, useSubscription } from '@apollo/client';\nimport { useAuth0 } from '@auth0/auth0-react';\nimport React, { useEffect, useState } from 'react';\nimport \"./MyScore.css\";\n\nconst GET_MYSCORE = gql`\n    subscription MyQuery($email: String!) {\n        player_by_pk(email: $email) {\n            name\n            score\n        }\n    }\n`;\n\nconst MyScore = () => {\n\n    const [email, setEmail] = useState(\"\");\n    const { user, isLoading } = useAuth0();\n    const { loading, error, data } = useSubscription(GET_MYSCORE, { variables: { email: email } });\n\n    useEffect(() => {\n        if (user) {\n            setEmail(user.email)\n        }\n    }, [user]);\n\n    if (loading || isLoading) {\n        return <div>Loading my profile...</div>;\n    }\n    if (error) {\n        console.error(error);\n        return <div>Error!</div>;\n    }\n\n    if (data.player_by_pk) {\n        return (\n            <div>\n                <div className=\"column\">\n                    <img src={user.picture} alt={user.name} />\n                    <h2>{user.name}'s score - {data.player_by_pk.score}</h2>\n                </div>\n            </div>\n        )\n    }\n}\n\nexport default MyScore;\n","import { gql, useMutation } from '@apollo/client';\nimport { useAuth0 } from '@auth0/auth0-react';\nimport React, { useEffect, useState } from 'react';\nimport \"./PlayButton.css\"\n\nconst INCREMENT_MYSCORE = gql`\n    mutation MyMutation($email: String) {\n        update_player(where: {email: {_eq: $email}}, _inc: {score: 1}) {\n        returning {\n            score\n        }\n        }\n    }\n`;\n\nconst Button = () => {\n    const [email, setEmail] = useState(\"\");\n    const { user, isLoading } = useAuth0();\n    const [incrementMyScore] = useMutation(INCREMENT_MYSCORE, { variables: { email: email } });\n\n    useEffect(() => {\n        if (user) {\n            setEmail(user.email)\n        }\n    }, [user]);\n\n    if (isLoading) {\n        return (\n            <div>Loading...</div>\n        )\n    }\n\n    return (\n        <div>\n            <button type=\"button\" className=\"playbutton\" onClick={incrementMyScore}>Click to play</button>\n        </div>\n    )\n};\nexport default Button;","import { ApolloClient, ApolloProvider, InMemoryCache } from \"@apollo/client\";\nimport { WebSocketLink } from \"@apollo/client/link/ws\";\nimport React, { useState } from \"react\";\n\nimport { useAuth0 } from \"@auth0/auth0-react\";\nimport \"./App.css\";\nimport HighScores from \"./components/HighScores/HighScores\";\nimport LoginButton from \"./components/LoginButton/LoginButton\";\nimport LogoutButton from \"./components/LogoutButton/LogoutButton\";\nimport MyScore from \"./components/MyScore/MyScore\";\nimport Button from \"./components/PlayButton/PlayButton\";\n\nconst createApolloClient = () => {\n  return new ApolloClient({\n    link: new WebSocketLink({\n      uri: \"wss://simplest-game-ever.hasura.app/v1/graphql\",\n      options: {\n        reconnect: true,\n        connectionParams: {\n          headers: {\n            \"x-hasura-admin-secret\":\n              process.env.REACT_APP_X_HASURA_ADMIN_SECRET,\n          },\n        },\n      },\n    }),\n    cache: new InMemoryCache(),\n  });\n};\n\n\nfunction getMyProfile() {\n  const { isLoading, isAuthenticated } = useAuth0();\n  if (isLoading) {\n    return (\n      <div>Loading my profile...</div>\n    )\n  }\n  if (isAuthenticated) {\n    return (\n      <div>\n        <Button />\n        <MyScore />\n        <LogoutButton />\n      </div>\n    )\n  } else {\n    return (<div><LoginButton /></div>)\n  }\n}\n\n\nconst App = () => {\n  const [client] = useState(createApolloClient());\n  return (\n    <ApolloProvider client={client}>\n      <div className=\"App\">\n        <h1>Simplest Game Ever</h1>\n        <HighScores />\n        {getMyProfile()}\n      </div >\n    </ApolloProvider>\n  );\n};\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom/client\";\nimport App from \"./App\";\nimport { Auth0Provider } from \"@auth0/auth0-react\";\n\nconst domain = \"dev-stkiosod.us.auth0.com\";\nconst clientId = \"mBngErPZM5YJ4qR3unU2GCVvl5qE7avd\";\n\nconst root = ReactDOM.createRoot(document.getElementById(\"root\"));\n\nroot.render(\n  <React.StrictMode>\n    <Auth0Provider\n      domain={domain}\n      clientId={clientId}\n      redirectUri={window.location.href}\n    >\n      <App />\n    </Auth0Provider>\n  </React.StrictMode>\n);\n"],"sourceRoot":""}